<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Ophelia Ravenshade ‚Äì Runenritual</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --accent-main: rgba(190,140,255,.95);
  --accent-soft: rgba(150,90,230,.45);
  --accent-shadow: rgba(210,160,255,.7);

  --char-bg: url("https://i.imgur.com/mBjmSMN.jpeg");
}

body{
  margin:0;
  padding:1rem;
  font-family:Georgia,serif;
  color:#eee;

  background:
    linear-gradient(rgba(5,3,8,0.88), rgba(5,3,8,0.88)),
    var(--char-bg) center / cover fixed no-repeat;

  min-height:100vh;
}

/* --- LAYOUT / UI --- */

.sub{
  text-align:center;
  opacity:.75;
  font-size:.8rem;
  margin-bottom:1rem;
}

.title-image{
  text-align:center;
  font-size:1.4rem;
  font-weight:bold;
  letter-spacing:.12em;
  margin:.4rem 0 .6rem;
  text-shadow:
    0 0 12px var(--accent-main),
    0 0 28px var(--accent-soft);
}

.wheels{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:.7rem;
  margin-bottom:1.2rem;
}

.wheel-column{ display:flex; flex-direction:column; }

.label{
  text-align:center;
  font-size:.7rem;
  letter-spacing:.16em;
  opacity:.75;
  margin-bottom:.2rem;
}

.wheel{
  border:1px solid #3a2a4a;
  border-radius:1rem;
  background:rgba(12,8,20,.85);
  padding:.3rem;
  height:220px;
  overflow-y:auto;
  scroll-snap-type:y mandatory;
  position:relative;

  touch-action: pan-y;
  overscroll-behavior-x:none;
  overflow-x:hidden;

  scrollbar-width:none;
}
.wheel::-webkit-scrollbar{ display:none; }

.spacer{ height:80px; }

.rune{
  scroll-snap-align:center;
  text-align:center;
  padding:.4rem 0;
  opacity:.35;
  transition:.25s ease;
}
.rune .symbol{ font-size:2rem; }
.rune .name{ font-size:.6rem; opacity:.7; }

.rune.active{
  opacity:1;
  transform:scale(1.15);
  text-shadow:0 0 14px var(--accent-main);
}

.wheel::after{
  content:"";
  position:absolute;
  top:50%;
  left:6%;
  right:6%;
  height:2px;
  transform:translateY(-50%);
  background:linear-gradient(90deg,transparent,var(--accent-main),transparent);
  box-shadow:0 0 10px var(--accent-main), 0 0 22px var(--accent-soft);
}

.wheel::before{
  content:"";
  position:absolute;
  top:50%;
  left:0;
  right:0;
  height:46px;
  transform:translateY(-50%);
  background:radial-gradient(
    ellipse at center,
    rgba(180,120,255,.18) 0%,
    rgba(180,120,255,.08) 35%,
    transparent 70%
  );
}

.back-button{
  display:inline-block;
  margin:0 0 1.2rem 0;
  padding:.45rem .9rem;
  font-size:.8rem;
  letter-spacing:.08em;
  text-decoration:none;
  color:#eee;
  border:1px solid rgba(255,255,255,.18);
  border-radius:.6rem;
  background:rgba(20,15,30,.55);
  backdrop-filter:blur(3px);
  transition:.25s ease;
  box-shadow:0 0 6px rgba(255,255,255,.08), 0 0 14px rgba(0,0,0,.6);
}

.back-button:hover{
  background:rgba(40,25,70,.65);
  box-shadow:0 0 10px rgba(255,255,255,.25), 0 0 20px rgba(180,120,255,.25);
  transform:translateY(-1px);
}

#cast, #reset{
  width:100%;
  padding:.9rem;
  font-size:1rem;
  border-radius:1rem;
  border:1px solid #6c55a3;
}

#cast{
  background:linear-gradient(180deg,#4d2e78,#26133c);
}
#reset{
  margin-top:.6rem;
  background:linear-gradient(180deg,#2a2a3c,#14141f);
}

#result{
  margin-top:1rem;
  padding:1.2rem;
  border:2px solid #5a3d88;
  border-radius:1rem;
  background:radial-gradient(circle at top,#160b28 0%,#07040b 70%);
  box-shadow:0 0 28px var(--accent-soft);
  line-height:1.6;
  opacity:0;
  transform:translateY(8px);
  transition:.6s ease;
}
#result.show{ opacity:1; transform:none; }

.small{ opacity:.7; font-size:.75rem; }

body.manifest .wheel{
  pointer-events:none;
  overflow:hidden;
}

body.manifest .rune{
  opacity:.25;
  filter:grayscale(1) brightness(.5);
}

body.manifest .rune.active{
  opacity:1 !important;
  filter:none !important;
  transform:scale(1.25);
  animation:pulseGlow 2.6s ease-in-out infinite;
}

@keyframes pulseGlow{
  0% { text-shadow:0 0 14px var(--accent-main),0 0 28px var(--accent-main),0 0 38px var(--accent-shadow); }
  50%{ text-shadow:0 0 24px var(--accent-main),0 0 40px var(--accent-main),0 0 60px var(--accent-shadow); }
  100%{ text-shadow:0 0 14px var(--accent-main),0 0 28px var(--accent-main),0 0 38px var(--accent-shadow); }
}

#effect-ui{
  margin-top:.6rem;
  padding:.6rem .8rem;
  border-radius:.8rem;
  background:rgba(10,6,18,.9);
  border:1px solid #4b356f;
  font-size:.8rem;
}
#effect-ui label{
  display:flex;
  gap:.4rem;
  margin-top:.35rem;
}
#effect-ui input{
  background:#07030f;
  color:#eee;
  border:1px solid #5a3d88;
}
</style>
</head>

<body>
  <a class="back-button" href="index.html">‚Üê Zur√ºck zur Startseite</a>
<div class="title-image">OPHELIA RAVENSHADE</div>

<div class="sub">
  Tiefling ¬∑ Sorcerer ¬∑ Zirkel der Hexen<br>
  <span class="small">Lila Blut ¬∑ Wilde Magie ¬∑ Einmal pro Long Rest</span>
</div>

<div class="wheels">
  <div class="wheel-column">
    <div class="label">ANKER</div>
    <div class="wheel" id="anker"></div>
  </div>

  <div class="wheel-column">
    <div class="label">EID</div>
    <div class="wheel" id="eid"></div>
  </div>

  <div class="wheel-column">
    <div class="label">FLUSS</div>
    <div class="wheel" id="fluss"></div>
  </div>
</div>

<button id="cast">üîÆ RITUAL WIRKEN</button>
<button id="reset">üåô LONG REST</button>

<div id="result">
  <span class="small">Die Magie wartet auf Ophelias Willen‚Ä¶</span>
</div>

<script>
(() => {

  /* -----------------------------------------------------------
     KONSTANTEN & DATEN
  ----------------------------------------------------------- */

  const CHARACTER_ID = "ophelia";
  const STORAGE_KEY = "runenritual_" + CHARACTER_ID + "_v1";

  const HAS_SAVED_STATE = !!localStorage.getItem(STORAGE_KEY);

  const RUNES = {  
    Fehu:"·ö†", Uruz:"·ö¢", Thurisaz:"·ö¶", Ansuz:"·ö®",
    Raidho:"·ö±", Kenaz:"·ö≤", Gebo:"·ö∑", Wunjo:"·öπ",
    Berkano:"·õí", Tiwaz:"·õè", Algiz:"·õâ", Dagaz:"·õû",
    Ingwaz:"·õú", Laguz:"·õö", Mannaz:"·õó", Othala:"·õü",
    Sowilo:"·õä", Jera:"·õÉ", Isa:"·õÅ", Hagalaz:"·ö∫",
    Perthro:"·õà", Nauthiz:"·öæ", Eihwaz:"·õá"
  };

  const OMEN = {
    Fehu:"Fehu tritt hervor ‚Äì Besitz verlangt F√ºhrung.",
    Uruz:"Uruz zeigt sich ‚Äì dein K√∂rper tr√§gt heute mehr.",
    Thurisaz:"Thurisaz blockiert den Weg ‚Äì Macht kommt durch Widerstand.",
    Ansuz:"Ansuz fl√ºstert ‚Äì Worte und Zauber h√∂ren zu.",
    Raidho:"Raidho rollt ‚Äì Bewegung formt das Schicksal.",
    Kenaz:"Kenaz brennt ‚Äì Wahrheit duldet keinen Schatten.",
    Gebo:"Gebo fordert Austausch ‚Äì nichts bleibt einseitig.",
    Wunjo:"Wunjo l√§chelt vorsichtig ‚Äì der Geist sucht Balance."
  };

  const EFFECTS = {
    Fehu:{
      Berkano:"Erhalte 1d4 zus√§tzliche Ladungen f√ºr ein begrenztes Item.",
      Tiwaz:"Gold- oder Ressourcenaufwand z√§hlt einmalig als doppelt effektiv.",
      Algiz:"Ein Besitz kann einmal nicht gestohlen oder zerst√∂rt werden.",
      Dagaz:"Ein Handel oder Tausch gelingt automatisch.",
      Ingwaz:"Speichere einen Ressourcenbonus (bis 50 gp √Ñquivalent).",
      Laguz:"Nach Ressourcenverlust darfst du ihn einmal r√ºckg√§ngig machen.",
      Mannaz:"Advantage bei Checks mit wertvollen Gegenst√§nden.",
      Othala:"Ein Item ist bis zum n√§chsten Long Rest fest an dich gebunden."
    },
    Uruz:{
      Berkano:"Erhalte tempor√§re Trefferpunkte (1d6 + Proficiency Bonus).",
      Tiwaz:"+1d4 Schaden bei STR-basierten Angriffen (1√ó pro Runde).",
      Algiz:"Einmal pro Runde Resistance gegen physischen Schaden.",
      Dagaz:"Ein STR- oder CON-Rettungswurf gilt automatisch als bestanden.",
      Ingwaz:"Speichere +1d8 f√ºr einen k√∂rperlichen Wurf.",
      Laguz:"Nach einem Miss darfst du +1d4 hinzuf√ºgen.",
      Mannaz:"Advantage auf Athletics oder Acrobatics.",
      Othala:"Du kannst einmal nicht prone werden."
    },
    Thurisaz:{
      Berkano:"Dein erster Treffer verursacht +1d6 zus√§tzlichen Schaden.",
      Tiwaz:"+1 auf Attack Rolls (1√ó pro Runde).",
      Algiz:"Ignoriere einmal Shield oder √§hnliche parierende Effekte.",
      Dagaz:"Ein Angriff trifft automatisch.",
      Ingwaz:"Speichere +1d10 zus√§tzlichen Schaden.",
      Laguz:"Nach einem verfehlten Angriff darfst du den Wurf wiederholen.",
      Mannaz:"Advantage auf Angriffe gegen ein ausgew√§hltes Ziel.",
      Othala:"Deine Waffe z√§hlt als magisch gegen Resistenz/Immunit√§t."
    },
    Ansuz:{
      Berkano:"Nach Wirken eines Zaubers erh√§ltst du Temp-TP = Zaubergrad √ó 2.",
      Tiwaz:"+1 auf Spell Attack oder Spell Save DC (f√ºr 1 Zauber).",
      Algiz:"Advantage auf Concentration Saves.",
      Dagaz:"Ein Zauber ignoriert Disadvantage.",
      Ingwaz:"Speichere einen +1-Zaubergrad-Effekt.",
      Laguz:"Nach Zauber-Fehlschlag +1d4 auf den n√§chsten Spell Attack.",
      Mannaz:"Advantage auf Arcana oder Religion.",
      Othala:"Ein Zauber ist an einen Ort oder ein Objekt gebunden."
    },
    Raidho:{
      Berkano:"Erhalte +10 ft Bonusbewegung.",
      Tiwaz:"+10 ft Bewegung, wenn du angreifst.",
      Algiz:"Ignoriere Difficult Terrain.",
      Dagaz:"Du handelst n√§chstes Mal automatisch zuerst.",
      Ingwaz:"Speichere einen 10-ft-Teleport (Bonus Action).",
      Laguz:"Nach einer Opportunity Attack verliert der Gegner seine Reaktion.",
      Mannaz:"Advantage auf Initiative.",
      Othala:"Du kannst einmal nicht bewegt/verschoben werden."
    },
    Kenaz:{
      Berkano:"+1d4 auf Perception/Investigation.",
      Tiwaz:"+1 auf Wahrnehmungsw√ºrfe.",
      Algiz:"Advantage gegen Illusionen.",
      Dagaz:"Du bekommst automatisch einen Hinweis.",
      Ingwaz:"Speichere +1d8 f√ºr Erkenntniswurf.",
      Laguz:"Nach Fehlschlag Perception rerollen.",
      Mannaz:"Advantage auf Insight.",
      Othala:"Ein Ort bleibt dir immer auffindbar."
    },
    Gebo:{
      Berkano:"Sozialer Gunst-Token.",
      Tiwaz:"+1 auf CHA-basierte Checks.",
      Algiz:"Einmal immun gegen Charm.",
      Dagaz:"Eine Bitte wird automatisch akzeptiert.",
      Ingwaz:"Speichere Advantage f√ºr sozialen Wurf.",
      Laguz:"Nach Ablehnung erneut versuchen.",
      Mannaz:"Advantage auf Persuasion oder Deception.",
      Othala:"Ein NPC h√§lt sicher sein Wort."
    },
    Wunjo:{
      Berkano:"Temp-TP gegen Psychic Damage.",
      Tiwaz:"+1 auf Saves.",
      Algiz:"Resistance gegen Fear/Charm.",
      Dagaz:"Ein WIS/CHA Save gelingt automatisch.",
      Ingwaz:"Speichere +1d10 auf Save.",
      Laguz:"Nach misslungenem Save wiederholen.",
      Mannaz:"Advantage auf WIS/CHA Saves.",
      Othala:"Du kannst einmal nicht frightened werden."
    }
  };

  const EFFECT_META = {
    Fehu:{ Berkano:"charges", Tiwaz:"single_use", Algiz:"item_bound", Dagaz:"single_use", Ingwaz:"charges", Laguz:"single_use", Mannaz:"ongoing_buff", Othala:"item_bound" },
    Uruz:{ Berkano:"ongoing_buff", Tiwaz:"charges", Algiz:"ongoing_buff", Dagaz:"single_use", Ingwaz:"charges", Laguz:"single_use", Mannaz:"ongoing_buff", Othala:"single_use" },
    Thurisaz:{ Berkano:"single_use", Tiwaz:"ongoing_buff", Algiz:"single_use", Dagaz:"single_use", Ingwaz:"charges", Laguz:"single_use", Mannaz:"ongoing_buff", Othala:"item_bound" },
    Ansuz:{ Berkano:"ongoing_buff", Tiwaz:"single_use", Algiz:"ongoing_buff", Dagaz:"single_use", Ingwaz:"charges", Laguz:"single_use", Mannaz:"ongoing_buff", Othala:"item_bound" },
    Raidho:{ Berkano:"ongoing_buff", Tiwaz:"ongoing_buff", Algiz:"ongoing_buff", Dagaz:"single_use", Ingwaz:"charges", Laguz:"single_use", Mannaz:"ongoing_buff", Othala:"single_use" },
    Kenaz:{ Berkano:"single_use", Tiwaz:"ongoing_buff", Algiz:"ongoing_buff", Dagaz:"single_use", Ingwaz:"charges", Laguz:"single_use", Mannaz:"ongoing_buff", Othala:"ongoing_buff" },
    Gebo:{ Berkano:"social_token", Tiwaz:"ongoing_buff", Algiz:"single_use", Dagaz:"single_use", Ingwaz:"charges", Laguz:"single_use", Mannaz:"ongoing_buff", Othala:"social_token" },
    Wunjo:{ Berkano:"ongoing_buff", Tiwaz:"ongoing_buff", Algiz:"ongoing_buff", Dagaz:"single_use", Ingwaz:"charges", Laguz:"single_use", Mannaz:"ongoing_buff", Othala:"single_use" }
  };

  const FLUSS = {
    Sowilo:{ dur:"Bis zum n√§chsten Long Rest", price:"Kein zus√§tzlicher Preis." },
    Jera:{ dur:"24 Stunden verz√∂gert", price:"Kann nicht vorzeitig beendet werden." },
    Isa:{ dur:"1 Encounter", price:"Bewegung halbiert ODER Bonusaktion blockiert." },
    Hagalaz:{ dur:"1 Encounter", price:"Du erleidest 1d6 Schaden beim Wirken." },
    Perthro:{ dur:"Trigger-basiert", price:"Bei keinem Trigger kleine Fehlwirkung." },
    Nauthiz:{ dur:"Bis zum n√§chsten Long Rest", price:"Du erh√§ltst 1 Stufe Ersch√∂pfung." },
    Eihwaz:{ dur:"Bis Schwelle erf√ºllt ist", price:"Danach Nachteil auf n√§chsten Wurf." },
    Algiz:{ dur:"Bis zum n√§chsten Long Rest", price:"Leicht abgeschw√§cht, aber gegen Gegenmagie gesch√ºtzt." }
  };

  let pick = { anker:null, eid:null, fluss:null };
  let restoring = HAS_SAVED_STATE;


  /* -----------------------------------------------------------
     WHEEL BAUEN
  ----------------------------------------------------------- */
  function buildWheel(id, keys, storeKey){
    const el = document.getElementById(id);
    if(!el) return;

    const repeat = 12;
    const runes = [];

    // Top spacer
    el.innerHTML = `<div class="spacer"></div>`;

    // Runen mehrfach bauen
    for(let i = 0; i < repeat; i++){
      keys.forEach(name=>{
        const d = document.createElement("div");
        d.className = "rune";
        d.dataset.value = name;
        d.innerHTML = `
          <div class="symbol">${RUNES[name]}</div>
          <div class="name">${name}</div>
        `;
        el.appendChild(d);
        runes.push(d);
      });
    }

    // Bottom spacer
    el.innerHTML += `<div class="spacer"></div>`;

    // Startposition wenn NEU
    if(!HAS_SAVED_STATE){
      requestAnimationFrame(()=>{
        const h = runes[0].offsetHeight || 1;
        const block = h * keys.length;
        el.scrollTop = block * 6;
      });
    }

// Position wiederherstellen wenn State existiert
if(HAS_SAVED_STATE){
  restoring = true;

  // Mehrfach versuchen, weil Safari/iFrame gerne scrollTop blockiert
  let tries = 0;
  const maxTries = 12;

  const tryRestore = () => {
    const ok = scrollWheelToValue(id, pick[storeKey]);

    if(ok || tries >= maxTries){
      // fertig ‚Äì wieder aktivieren
      setTimeout(()=> restoring = false, 50);
    } else {
      tries++;
      requestAnimationFrame(tryRestore);
    }
  };

  requestAnimationFrame(tryRestore);
}


    // Live scroll detection
    el.addEventListener("scroll",()=>{
      if(restoring) return;

      const rect = el.getBoundingClientRect();
      let best = null;
      let bestDist = Infinity;

      runes.forEach(node=>{
        const r = node.getBoundingClientRect();
        const d = Math.abs((r.top + r.height/2) - (rect.top + rect.height/2));
        if(d < bestDist){
          bestDist = d;
          best = node;
        }
      });

      if(best){
        runes.forEach(n=>n.classList.remove("active"));
        best.classList.add("active");
        pick[storeKey] = best.dataset.value;
      }
    });
  }


  /* -----------------------------------------------------------
     SCROLL-AUTO-ZENTRIERUNG
  ----------------------------------------------------------- */
function scrollWheelToValue(wheelId, value){
  const wheel = document.getElementById(wheelId);
  if(!wheel || !value) return false;

  const runes = [...wheel.querySelectorAll(".rune")];
  const matches = runes.filter(r => r.dataset.value === value);
  if(matches.length === 0) return false;

  const target = matches[Math.floor(matches.length / 2)];
  const wheelH = wheel.clientHeight;
  const center = target.offsetTop + target.offsetHeight/2;

  wheel.scrollTop = center - wheelH/2;

  // Pr√ºfen, ob der Scroll funktioniert hat
  const success = Math.abs(wheel.scrollTop - (center - wheelH/2)) < 3;
  return success;
}
  /* -----------------------------------------------------------
     TRACKING-UI
  ----------------------------------------------------------- */
  function buildTrackingUI(anker, eid){
    const meta = EFFECT_META[anker]?.[eid] || null;
    if(!meta) return "";

    switch(meta){
      case "single_use":
        return `
          <div id="effect-ui">
          <b>üßø TRACKING</b><br>
          <label><input type="checkbox" id="effect-used"> Effekt wurde eingesetzt</label>
          </div>
        `;

      case "charges":
        return `
          <div id="effect-ui">
          <b>üßø TRACKING</b><br>
          <label>Ladungen: <input type="number" id="effect-charges" min="0" value="1"></label>
          </div>
        `;

      case "item_bound":
        return `
          <div id="effect-ui">
          <b>üßø TRACKING</b><br>
          <label>Item: <input type="text" id="effect-item"></label>
          </div>
        `;

      case "social_token":
        return `
          <div id="effect-ui">
          <b>üßø TRACKING</b><br>
          <label>Person/Ort: <input type="text" id="effect-social"></label>
          </div>
        `;

      case "ongoing_buff":
        return `
          <div id="effect-ui">
          <b>üßø TRACKING</b><br>
          <label><input type="checkbox" id="effect-active" checked> Buff aktiv</label>
          </div>
        `;
    }
    return "";
  }


  /* -----------------------------------------------------------
     SPEICHERN / LADEN
  ----------------------------------------------------------- */
  function saveRitualState(){
    const state = {
      pick,
      manifest: document.body.classList.contains("manifest"),
      tracking:{}
    };

    const ui = document.getElementById("effect-ui");
    if(ui){
      ui.querySelectorAll("input").forEach(input=>{
        state.tracking[input.id] =
          input.type === "checkbox" ? input.checked : input.value;
      });
    }

    localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
  }


  function loadRitualState(){
    const raw = localStorage.getItem(STORAGE_KEY);
    if(!raw) return;

    const state = JSON.parse(raw);
    if(!state.pick) return;

    pick = state.pick;
    document.body.classList.add("manifest");

    const omen  = OMEN[pick.anker];
    const effectText = EFFECTS[pick.anker][pick.eid];
    const flow  = FLUSS[pick.fluss];

    const res = document.getElementById("result");
    res.innerHTML = `
      <b>üïØÔ∏è OMEN</b><br><i>${omen}</i>
      <hr>
      <b>‚öîÔ∏è EFFEKT</b><br>${effectText}<br>
      <b>Dauer:</b> ${flow.dur}
      <hr>
      <b>‚ö†Ô∏è PREIS</b><br>${flow.price}
      <hr>
      ${buildTrackingUI(pick.anker, pick.eid)}
      <span class="small">Runenritual: 1√ó pro Long Rest.</span>
    `;
    res.classList.add("show");

    if(state.tracking){
      Object.entries(state.tracking).forEach(([id,val])=>{
        const el = document.getElementById(id);
        if(el){
          if(el.type === "checkbox") el.checked = val;
          else el.value = val;
        }
      });
    }
  }


/* -----------------------------------------------------------
   INIT
----------------------------------------------------------- */
document.addEventListener("DOMContentLoaded",()=>{

  /* 1) WHEELS BAUEN */
  buildWheel("anker", Object.keys(OMEN), "anker");
  buildWheel("eid", Object.keys(EFFECTS.Fehu), "eid");
  buildWheel("fluss", Object.keys(FLUSS), "fluss");

  /* 2) STATE LADEN */
  loadRitualState(); // setzt pick = gespeicherte Werte UND zeigt result an

  /* 3) RESTORE-SCROLL AUSF√úHREN ‚Äì erst jetzt sind DOM + pick ready */
  setTimeout(()=>{
    scrollWheelToValue("anker", pick.anker);
    scrollWheelToValue("eid", pick.eid);
    scrollWheelToValue("fluss", pick.fluss);
  }, 60);

  /* 4) BUTTON-LOGIK */
  document.getElementById("cast").onclick = () => {
    if(!pick.anker || !pick.eid || !pick.fluss) return;

    document.body.classList.add("manifest");

    const omen  = OMEN[pick.anker];
    const effectText = EFFECTS[pick.anker][pick.eid];
    const flow = FLUSS[pick.fluss];

    const res = document.getElementById("result");
    res.innerHTML = `
      <b>üïØÔ∏è OMEN</b><br><i>${omen}</i>
      <hr>
      <b>‚öîÔ∏è EFFEKT</b><br>${effectText}<br>
      <b>Dauer:</b> ${flow.dur}
      <hr>
      <b>‚ö†Ô∏è PREIS</b><br>${flow.price}
      <hr>
      ${buildTrackingUI(pick.anker, pick.eid)}
      <span class="small">Runenritual: 1√ó pro Long Rest.</span>
    `;
    res.classList.add("show");
    saveRitualState();
  };

  document.getElementById("reset").onclick = () => {
    localStorage.removeItem(STORAGE_KEY);
    document.body.classList.remove("manifest");
    const res = document.getElementById("result");
    res.classList.remove("show");
    res.innerHTML = `<span class="small">Ein neuer Tag beginnt. Die Runen schweigen.</span>`;
  };

  document.addEventListener("input", e=>{
    if(e.target.closest("#effect-ui")) saveRitualState();
  });
  document.addEventListener("change", e=>{
    if(e.target.closest("#effect-ui")) saveRitualState();
  });

});



})();
</script>

</body>
</html>

